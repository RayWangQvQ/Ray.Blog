@page "/posts"
@page "/categoryId/{CategoryId:guid}/posts"

@using Ray.Blog.Posts
@using Ray.Blog.Blazor.Pages.RankingList

@inherits BlogComponentBase

@*搜索*@
<Row Margin="Margin.Is4" VerticalAlignment="VerticalAlignment.Middle">
    <Div>
        <Field Horizontal="true" Overflow="Overflow.Auto">
            <FieldLabel>标题：</FieldLabel>
            <FieldBody>
                <TextEdit @bind-Text="@this.GetPostListRequest.Title" />
            </FieldBody>
        </Field>

        <Field Horizontal="true" Overflow="Overflow.Auto">
            <FieldLabel>分类：</FieldLabel>
            <FieldBody>
                <TextEdit Text="@this.CategoryId.ToString()" />
            </FieldBody>
        </Field>
    </Div>
    <Div>
        <Button Color="Color.Primary" Clicked="OnSearchButtonClickAsync">查询</Button>
    </Div>
</Row>

@*博文列表及右侧排行榜*@
<Row Gutter="(64, 16)">
    @*博文列表*@
    <Column ColumnSize="ColumnSize.Is9" Background="Background.White">
        <DataGrid TItem="PostDto"
                  Data="PostList"
                  ReadData="OnDataGridReadAsync"
                  TotalItems="TotalCount"
                  ShowPager="true"
                  PageSize="PageSize">
            <DetailRowTemplate>

                <Div Flex="Flex.JustifyContent.Between" Width="Width.Is100">
                    <Heading Size="HeadingSize.Is5" Margin="Margin.Is1.FromBottom">
                        <Blazorise.Link To="@("/posts/"+context.Id.ToString())" Title="test">@context.Title</Blazorise.Link>
                    </Heading>
                    <Small>@context.CreationTime</Small>
                </Div>
                <Small>这是简介</Small>
                <Paragraph Margin="Margin.Is1.FromBottom">
                    @foreach (var tag in context.Tags)
                            {
                    <Badge Color="Color.Info">@tag.Name</Badge>
                    }
                </Paragraph>

            </DetailRowTemplate>
        </DataGrid>
    </Column>

    @*右侧排行榜*@
    <Column ColumnSize="ColumnSize.Is3">

        @*最新评论*@
        <Row>
            <Text TextColor="TextColor.Secondary">💬 最新评论</Text>
        </Row>
        <Row Width="Width.Is100">
            <RecentCommentRankingList></RecentCommentRankingList>
        </Row>

        @*点赞排行*@
        <Row>
            <Text TextColor="TextColor.Secondary">👍 点赞排行</Text>
        </Row>
        <Row>
            <ThumbsUpRankingList />
        </Row>

        @*阅读排行*@
        <Row>
            <Text TextColor="TextColor.Secondary">👀 阅读排行</Text>
        </Row>
        <Row>
            <ReadingRankingList />
        </Row>
    </Column>
</Row>


@code {
}
